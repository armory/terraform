{
"annotations": {
"list": [
{
"builtIn": 1,
"datasource": "-- Grafana --",
"enable": true,
"hide": true,
"iconColor": "rgba(0, 211, 255, 1)",
"name": "Annotations & Alerts",
"type": "dashboard"
}
]
},
"description": "Overall health of all Spinnaker services",
"editable": true,
"gnetId": null,
"graphTooltip": 0,
"id": 23,
"iteration": 1584487560055,
"links": [],
"panels": [
{
"content": "\n# Spinnaker main monitoring dashboard\n\nSelect desired service at the top dropdown. \n\nIf one chart is in alert, try changing the service selection dropdown until you see which service is misbehaving.\n\n\n\n",
"datasource": "prometheus",
"description": "",
"gridPos": {
"h": 6,
"w": 12,
"x": 0,
"y": 0
},
"id": 45,
"mode": "markdown",
"options": {},
"pluginVersion": "6.5.1",
"timeFrom": null,
"timeShift": null,
"title": "",
"type": "text"
},
{
"dashboardFilter": "",
"dashboardTags": [],
"datasource": "prometheus",
"description": "",
"folderId": null,
"gridPos": {
"h": 6,
"w": 12,
"x": 12,
"y": 0
},
"id": 43,
"limit": "20",
"nameFilter": "",
"onlyAlertsOnDashboard": true,
"options": {},
"show": "current",
"sortOrder": 3,
"stateFilter": [],
"timeFrom": null,
"timeShift": null,
"title": "Health overview",
"type": "alertlist"
},
{
"collapsed": true,
"datasource": "prometheus",
"gridPos": {
"h": 1,
"w": 24,
"x": 0,
"y": 6
},
"id": 24,
"panels": [
{
"alert": {
"alertRuleTags": {},
"conditions": [
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "and"
},
"query": {
"params": [
"B",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"C",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"D",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"E",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"F",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"G",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"H",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"I",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"J",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "and"
},
"query": {
"params": [
"K",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
}
],
"executionErrorState": "alerting",
"for": "5m",
"frequency": "1m",
"handler": 1,
"message": "Some service is taking a long time to respond (increased controller latency).",
"name": "Service controller latency",
"noDataState": "ok",
"notifications": []
},
"aliasColors": {},
"bars": false,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Latency below 5 seconds.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 0,
"y": 7
},
"hiddenSeries": false,
"id": 2,
"interval": "",
"legend": {
"alignAsTable": true,
"avg": true,
"current": false,
"hideEmpty": true,
"hideZero": true,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": true,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": false,
"steppedLine": false,
"targets": [
{
"expr": "label_replace(sum(rate(controller_invocations_seconds_sum{spinSvc=\"$service\"}[1m])*1000000000) by (controller, method) / sum(rate(controller_invocations_seconds_count{spinSvc=\"$service\"}[1m])) by (controller, method), \"controller\", \"$1\", \"controller\", \"(.*)Controller\")",
"intervalFactor": 2,
"legendFormat": "{{controller}}/{{method}}",
"refId": "A"
},
{
"expr": "label_replace(sum(rate(controller_invocations_seconds_sum{spinSvc=\"gate\"}[1m])*1000000000) by (controller, method) / sum(rate(controller_invocations_seconds_count{spinSvc=\"gate\"}[1m])) by (controller, method), \"controller\", \"$1\", \"controller\", \"(.*)Controller\")",
"hide": true,
"intervalFactor": 2,
"legendFormat": "gate",
"refId": "B"
},
{
"expr": "label_replace(sum(rate(controller_invocations_seconds_sum{spinSvc=\"orca\"}[1m])*1000000000) by (controller, method) / sum(rate(controller_invocations_seconds_count{spinSvc=\"orca\"}[1m])) by (controller, method), \"controller\", \"$1\", \"controller\", \"(.*)Controller\")",
"hide": true,
"intervalFactor": 2,
"legendFormat": "orca",
"refId": "C"
},
{
"expr": "label_replace(sum(rate(controller_invocations_seconds_sum{spinSvc=\"front50\"}[1m])*1000000000) by (controller, method) / sum(rate(controller_invocations_seconds_count{spinSvc=\"front50\"}[1m])) by (controller, method), \"controller\", \"$1\", \"controller\", \"(.*)Controller\")",
"hide": true,
"intervalFactor": 2,
"legendFormat": "front50",
"refId": "D"
},
{
"expr": "label_replace(sum(rate(controller_invocations_seconds_sum{spinSvc=\"clouddriver\"}[1m])*1000000000) by (controller, method) / sum(rate(controller_invocations_seconds_count{spinSvc=\"clouddriver\"}[1m])) by (controller, method), \"controller\", \"$1\", \"controller\", \"(.*)Controller\")",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver",
"refId": "E"
},
{
"expr": "label_replace(sum(rate(controller_invocations_seconds_sum{spinSvc=\"clouddriver_caching\"}[1m])*1000000000) by (controller, method) / sum(rate(controller_invocations_seconds_count{spinSvc=\"clouddriver_caching\"}[1m])) by (controller, method), \"controller\", \"$1\", \"controller\", \"(.*)Controller\")",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_caching",
"refId": "F"
},
{
"expr": "label_replace(sum(rate(controller_invocations_seconds_sum{spinSvc=\"clouddriver_rw\"}[1m])*1000000000) by (controller, method) / sum(rate(controller_invocations_seconds_count{spinSvc=\"clouddriver_rw\"}[1m])) by (controller, method), \"controller\", \"$1\", \"controller\", \"(.*)Controller\")",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_rw",
"refId": "G"
},
{
"expr": "label_replace(sum(rate(controller_invocations_seconds_sum{spinSvc=\"clouddriver_ro\"}[1m])*1000000000) by (controller, method) / sum(rate(controller_invocations_seconds_count{spinSvc=\"clouddriver_ro\"}[1m])) by (controller, method), \"controller\", \"$1\", \"controller\", \"(.*)Controller\")",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_ro",
"refId": "H"
},
{
"expr": "label_replace(sum(rate(controller_invocations_seconds_sum{spinSvc=\"echo\"}[1m])*1000000000) by (controller, method) / sum(rate(controller_invocations_seconds_count{spinSvc=\"echo\"}[1m])) by (controller, method), \"controller\", \"$1\", \"controller\", \"(.*)Controller\")",
"hide": true,
"intervalFactor": 2,
"legendFormat": "echo",
"refId": "I"
},
{
"expr": "label_replace(sum(rate(controller_invocations_seconds_sum{spinSvc=\"igor\"}[1m])*1000000000) by (controller, method) / sum(rate(controller_invocations_seconds_count{spinSvc=\"igor\"}[1m])) by (controller, method), \"controller\", \"$1\", \"controller\", \"(.*)Controller\")",
"hide": true,
"intervalFactor": 2,
"legendFormat": "igor",
"refId": "J"
},
{
"expr": "label_replace(sum(rate(controller_invocations_seconds_sum{spinSvc=\"rosco\"}[1m])*1000000000) by (controller, method) / sum(rate(controller_invocations_seconds_count{spinSvc=\"rosco\"}[1m])) by (controller, method), \"controller\", \"$1\", \"controller\", \"(.*)Controller\")",
"hide": true,
"intervalFactor": 2,
"legendFormat": "rosco",
"refId": "K"
}
],
"thresholds": [
{
"colorMode": "critical",
"fill": true,
"line": true,
"op": "gt",
"value": 5000000000
}
],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "-> $service controller latency by controller / method",
"tooltip": {
"shared": true,
"sort": 2,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"decimals": null,
"format": "ns",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
},
{
"format": "ns",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"alert": {
"alertRuleTags": {},
"conditions": [
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "and"
},
"query": {
"params": [
"B",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"C",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"D",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"E",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"F",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"G",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"H",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"I",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"J",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"K",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
}
],
"executionErrorState": "alerting",
"for": "5m",
"frequency": "1m",
"handler": 1,
"message": "Some service is receiving slow responses from downstream (increased outgoing requests latency).",
"name": "Outgoing service requests latency",
"noDataState": "ok",
"notifications": []
},
"aliasColors": {},
"bars": false,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Latency below 5 seconds.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 12,
"y": 7
},
"hiddenSeries": false,
"id": 3,
"legend": {
"alignAsTable": true,
"avg": true,
"current": false,
"hideEmpty": true,
"hideZero": true,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": true,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": false,
"steppedLine": false,
"targets": [
{
"expr": "sum(rate(okhttp_requests_seconds_sum{spinSvc=\"$service\"}[1m])*1000000000) by (requestHost) / sum(rate(okhttp_requests_seconds_count{spinSvc=\"$service\"}[1m])) by (requestHost)",
"intervalFactor": 2,
"legendFormat": "{{requestHost}}",
"refId": "A"
},
{
"expr": "sum(rate(okhttp_requests_seconds_sum{spinSvc=\"gate\"}[1m])*1000000000) by (requestHost) / sum(rate(okhttp_requests_seconds_count{spinSvc=\"gate\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "gate",
"refId": "B"
},
{
"expr": "sum(rate(okhttp_requests_seconds_sum{spinSvc=\"orca\"}[1m])*1000000000) by (requestHost) / sum(rate(okhttp_requests_seconds_count{spinSvc=\"orca\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "orca",
"refId": "C"
},
{
"expr": "sum(rate(okhttp_requests_seconds_sum{spinSvc=\"clouddriver\"}[1m])*1000000000) by (requestHost) / sum(rate(okhttp_requests_seconds_count{spinSvc=\"clouddriver\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver",
"refId": "D"
},
{
"expr": "sum(rate(okhttp_requests_seconds_sum{spinSvc=\"clouddriver_caching\"}[1m])*1000000000) by (requestHost) / sum(rate(okhttp_requests_seconds_count{spinSvc=\"clouddriver_caching\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_caching",
"refId": "E"
},
{
"expr": "sum(rate(okhttp_requests_seconds_sum{spinSvc=\"clouddriver_ro\"}[1m])*1000000000) by (requestHost) / sum(rate(okhttp_requests_seconds_count{spinSvc=\"clouddriver_ro\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_ro",
"refId": "F"
},
{
"expr": "sum(rate(okhttp_requests_seconds_sum{spinSvc=\"clouddriver_rw\"}[1m])*1000000000) by (requestHost) / sum(rate(okhttp_requests_seconds_count{spinSvc=\"clouddriver_rw\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_rw",
"refId": "G"
},
{
"expr": "sum(rate(okhttp_requests_seconds_sum{spinSvc=\"front50\"}[1m])*1000000000) by (requestHost) / sum(rate(okhttp_requests_seconds_count{spinSvc=\"front50\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "front50",
"refId": "H"
},
{
"expr": "sum(rate(okhttp_requests_seconds_sum{spinSvc=\"echo\"}[1m])*1000000000) by (requestHost) / sum(rate(okhttp_requests_seconds_count{spinSvc=\"echo\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "echo",
"refId": "I"
},
{
"expr": "sum(rate(okhttp_requests_seconds_sum{spinSvc=\"igor\"}[1m])*1000000000) by (requestHost) / sum(rate(okhttp_requests_seconds_count{spinSvc=\"igor\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "igor",
"refId": "J"
},
{
"expr": "sum(rate(okhttp_requests_seconds_sum{spinSvc=\"rosco\"}[1m])*1000000000) by (requestHost) / sum(rate(okhttp_requests_seconds_count{spinSvc=\"rosco\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "rosco",
"refId": "K"
}
],
"thresholds": [
{
"colorMode": "critical",
"fill": true,
"line": true,
"op": "gt",
"value": 5000000000
}
],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "Outgoing $service requests latency by requestHost ->",
"tooltip": {
"shared": true,
"sort": 2,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"format": "ns",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
},
{
"format": "ns",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"aliasColors": {},
"bars": true,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Any value.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 0,
"y": 12
},
"hiddenSeries": false,
"id": 11,
"interval": "",
"legend": {
"alignAsTable": true,
"avg": true,
"current": false,
"hideEmpty": true,
"hideZero": true,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": true,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": true,
"steppedLine": false,
"targets": [
{
"expr": "label_replace(sum(rate(controller_invocations_total{status=\"2xx\",spinSvc=\"$service\"}[1m])) by (controller, method, statusCode), \"controller\", \"$1\", \"controller\", \"(.*)Controller\")",
"intervalFactor": 2,
"legendFormat": "{{statusCode}}/{{controller}}/{{method}}",
"refId": "A"
}
],
"thresholds": [],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "<- $service 2xx returned by controller / method",
"tooltip": {
"shared": true,
"sort": 2,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"decimals": null,
"format": "short",
"label": "avg/second",
"logBase": 1,
"max": null,
"min": "0",
"show": true
},
{
"format": "short",
"label": "",
"logBase": 1,
"max": null,
"min": "0",
"show": true
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"aliasColors": {},
"bars": true,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Any value.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 12,
"y": 12
},
"hiddenSeries": false,
"id": 12,
"interval": "",
"legend": {
"alignAsTable": true,
"avg": true,
"current": false,
"hideEmpty": true,
"hideZero": true,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": false,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": true,
"steppedLine": false,
"targets": [
{
"expr": "sum(rate(okhttp_requests_seconds_count{status=\"2xx\",spinSvc=\"$service\"}[1m])) by (requestHost)",
"intervalFactor": 2,
"legendFormat": "{{requestHost}}",
"refId": "A"
}
],
"thresholds": [],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "$service 2xx received by requestHost <-",
"tooltip": {
"shared": true,
"sort": 2,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"decimals": null,
"format": "short",
"label": "avg/second",
"logBase": 1,
"max": null,
"min": "0",
"show": true
},
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": "0",
"show": true
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"alert": {
"alertRuleTags": {},
"conditions": [
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "and"
},
"query": {
"params": [
"B",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"C",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"D",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"E",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"F",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"G",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"H",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"I",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"J",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"K",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
}
],
"executionErrorState": "alerting",
"for": "5m",
"frequency": "1m",
"handler": 1,
"message": "Some service is returning 5xx error responses.",
"name": "5xx errors sent",
"noDataState": "ok",
"notifications": []
},
"aliasColors": {},
"bars": true,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Chart empty at all times.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 0,
"y": 17
},
"hiddenSeries": false,
"id": 7,
"interval": "",
"legend": {
"alignAsTable": true,
"avg": true,
"current": false,
"hideEmpty": true,
"hideZero": true,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": true,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": true,
"steppedLine": false,
"targets": [
{
"expr": "label_replace(sum(rate(controller_invocations_total{status=\"5xx\",spinSvc=\"$service\"}[1m])) by (controller, method, statusCode), \"controller\", \"$1\", \"controller\", \"(.*)Controller\")",
"hide": false,
"intervalFactor": 2,
"legendFormat": "{{statusCode}}/{{controller}}/{{method}}",
"refId": "A"
},
{
"expr": "sum(rate(controller_invocations_total{status=\"5xx\",spinSvc=\"gate\"}[1m])) by (controller, method, statusCode)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "gate",
"refId": "B"
},
{
"expr": "sum(rate(controller_invocations_total{status=\"5xx\",spinSvc=\"orca\"}[1m])) by (controller, method, statusCode)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "orca",
"refId": "C"
},
{
"expr": "sum(rate(controller_invocations_total{status=\"5xx\",spinSvc=\"clouddriver\"}[1m])) by (controller, method, statusCode)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver",
"refId": "D"
},
{
"expr": "sum(rate(controller_invocations_total{status=\"5xx\",spinSvc=\"clouddriver_caching\"}[1m])) by (controller, method, statusCode)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_caching",
"refId": "E"
},
{
"expr": "sum(rate(controller_invocations_total{status=\"5xx\",spinSvc=\"clouddriver_ro\"}[1m])) by (controller, method, statusCode)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_ro",
"refId": "F"
},
{
"expr": "sum(rate(controller_invocations_total{status=\"5xx\",spinSvc=\"clouddriver_rw\"}[1m])) by (controller, method, statusCode)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_rw",
"refId": "G"
},
{
"expr": "sum(rate(controller_invocations_total{status=\"5xx\",spinSvc=\"front50\"}[1m])) by (controller, method, statusCode)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "front50",
"refId": "H"
},
{
"expr": "sum(rate(controller_invocations_total{status=\"5xx\",spinSvc=\"echo\"}[1m])) by (controller, method, statusCode)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "echo",
"refId": "I"
},
{
"expr": "sum(rate(controller_invocations_total{status=\"5xx\",spinSvc=\"igor\"}[1m])) by (controller, method, statusCode)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "igor",
"refId": "J"
},
{
"expr": "sum(rate(controller_invocations_total{status=\"5xx\",spinSvc=\"rosco\"}[1m])) by (controller, method, statusCode)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "rosco",
"refId": "K"
}
],
"thresholds": [
{
"colorMode": "critical",
"fill": true,
"line": true,
"op": "gt",
"value": 0.25
}
],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "<- $service 5xx errors returned by controller / method",
"tooltip": {
"shared": true,
"sort": 2,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"decimals": null,
"format": "short",
"label": "avg/second",
"logBase": 1,
"max": null,
"min": "0",
"show": true
},
{
"format": "short",
"label": "",
"logBase": 1,
"max": null,
"min": "0",
"show": true
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"alert": {
"alertRuleTags": {},
"conditions": [
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "and"
},
"query": {
"params": [
"B",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"C",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"D",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"E",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"F",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"G",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"H",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"I",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"J",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"K",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
}
],
"executionErrorState": "alerting",
"for": "5m",
"frequency": "1m",
"handler": 1,
"message": "Some service is receiving 5xx errors.",
"name": "5xx errors received",
"noDataState": "ok",
"notifications": []
},
"aliasColors": {},
"bars": true,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Chart empty at all times.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 12,
"y": 17
},
"hiddenSeries": false,
"id": 8,
"interval": "",
"legend": {
"alignAsTable": true,
"avg": true,
"current": false,
"hideEmpty": true,
"hideZero": true,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": true,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": true,
"steppedLine": false,
"targets": [
{
"expr": "sum(rate(okhttp_requests_seconds_count{status=\"5xx\",spinSvc=\"$service\"}[1m])) by (requestHost)",
"intervalFactor": 2,
"legendFormat": "{{requestHost}}",
"refId": "A"
},
{
"expr": "sum(rate(okhttp_requests_seconds_count{status=\"5xx\",spinSvc=\"gate\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "gate",
"refId": "B"
},
{
"expr": "sum(rate(okhttp_requests_seconds_count{status=\"5xx\",spinSvc=\"orca\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "orca",
"refId": "C"
},
{
"expr": "sum(rate(okhttp_requests_seconds_count{status=\"5xx\",spinSvc=\"clouddriver\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver",
"refId": "D"
},
{
"expr": "sum(rate(okhttp_requests_seconds_count{status=\"5xx\",spinSvc=\"clouddriver_caching\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_caching",
"refId": "E"
},
{
"expr": "sum(rate(okhttp_requests_seconds_count{status=\"5xx\",spinSvc=\"clouddriver_ro\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_ro",
"refId": "F"
},
{
"expr": "sum(rate(okhttp_requests_seconds_count{status=\"5xx\",spinSvc=\"clouddriver_rw\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_rw",
"refId": "G"
},
{
"expr": "sum(rate(okhttp_requests_seconds_count{status=\"5xx\",spinSvc=\"front50\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "front50",
"refId": "H"
},
{
"expr": "sum(rate(okhttp_requests_seconds_count{status=\"5xx\",spinSvc=\"echo\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "echo",
"refId": "I"
},
{
"expr": "sum(rate(okhttp_requests_seconds_count{status=\"5xx\",spinSvc=\"igor\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "igor",
"refId": "J"
},
{
"expr": "sum(rate(okhttp_requests_seconds_count{status=\"5xx\",spinSvc=\"rosco\"}[1m])) by (requestHost)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "rosco",
"refId": "K"
}
],
"thresholds": [
{
"colorMode": "critical",
"fill": true,
"line": true,
"op": "gt",
"value": 0.25
}
],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "$service 5xx errors received by requestHost <-",
"tooltip": {
"shared": true,
"sort": 2,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"decimals": null,
"format": "short",
"label": "avg/second",
"logBase": 1,
"max": null,
"min": "0",
"show": true
},
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": "0",
"show": true
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"alert": {
"alertRuleTags": {},
"conditions": [
{
"evaluator": {
"params": [
0
],
"type": "gt"
},
"operator": {
"type": "and"
},
"query": {
"params": [
"D",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
0
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"E",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
0
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"F",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
0
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"G",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
0
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"H",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
0
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"I",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
0
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"J",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
0
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"K",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
0
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"L",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
0
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"M",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
}
],
"executionErrorState": "alerting",
"for": "5m",
"frequency": "1m",
"handler": 1,
"message": "Some service has resilience4j circuitbreaker being executed.",
"name": "Resilience4j circuitbreaker",
"noDataState": "ok",
"notifications": []
},
"aliasColors": {},
"bars": false,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Chart empty at all times.\nA \"success\" fallback means that the original request failed and a fallback behavior was executed. A \"failed\" fallback means that both, original and fallback behaviors failed. A \"circuitOpen\" means sustained failures causing fallbacks.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 0,
"y": 22
},
"hiddenSeries": false,
"id": 10,
"legend": {
"alignAsTable": true,
"avg": true,
"current": false,
"hideEmpty": true,
"hideZero": true,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": true,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": false,
"steppedLine": false,
"targets": [
{
"expr": "sum(rate(resilience4j_circuitbreaker_calls_total{kind='successful',spinSvc=\"$service\"}[1m])) by (name, kind)",
"intervalFactor": 2,
"legendFormat": "success/{{name}}({{kind}})",
"refId": "A"
},
{
"expr": "sum(rate(resilience4j_circuitbreaker_failure_rate{spinSvc=\"$service\"}[1m])) by (name, kind)",
"intervalFactor": 2,
"legendFormat": "failure/{{name}}({{kind}})",
"refId": "B"
},
{
"expr": "sum(rate(resilience4j_circuitbreaker_state{spinSvc=\"$service\"}[1m])) by (name, kind)",
"legendFormat": "circuitOpen/{{name}}({{kind}})",
"refId": "C"
},
{
"expr": "sum(rate(resilience4j_circuitbreaker_calls_total{kind='successful',spinSvc=\"gate\"}[1m])) by (name, kind)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "success/gate",
"refId": "D"
},
{
"expr": "sum(rate(resilience4j_circuitbreaker_calls_total{kind='successful',spinSvc=\"orca\"}[1m])) by (name, kind)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "success/orca",
"refId": "E"
},
{
"expr": "sum(rate(resilience4j_circuitbreaker_calls_total{kind='successful',spinSvc=\"clouddriver\"}[1m])) by (name, kind)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "success/clouddriver",
"refId": "F"
},
{
"expr": "sum(rate(resilience4j_circuitbreaker_calls_total{kind='successful',spinSvc=\"clouddriver_caching\"}[1m])) by (name, kind)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "success/clouddriver_caching",
"refId": "G"
},
{
"expr": "sum(rate(resilience4j_circuitbreaker_calls_total{kind='successful',spinSvc=\"clouddriver_ro\"}[1m])) by (name, kind)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "success/clouddriver_ro",
"refId": "H"
},
{
"expr": "sum(rate(resilience4j_circuitbreaker_calls_total{kind='successful',spinSvc=\"clouddriver_rw\"}[1m])) by (name, kind)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "success/clouddriver_rw",
"refId": "I"
},
{
"expr": "sum(rate(resilience4j_circuitbreaker_calls_total{kind='successful',spinSvc=\"front50\"}[1m])) by (name, kind)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "success/front50",
"refId": "J"
},
{
"expr": "sum(rate(resilience4j_circuitbreaker_calls_total{kind='successful',spinSvc=\"echo\"}[1m])) by (name, kind)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "success/echo",
"refId": "K"
},
{
"expr": "sum(rate(resilience4j_circuitbreaker_calls_total{kind='successful',spinSvc=\"igor\"}[1m])) by (name, kind)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "success/igor",
"refId": "L"
},
{
"expr": "sum(rate(resilience4j_circuitbreaker_calls_total{kind='successful',spinSvc=\"rosco\"}[1m])) by (name, kind)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "success/rosco",
"refId": "M"
}
],
"thresholds": [
{
"colorMode": "critical",
"fill": true,
"line": true,
"op": "gt",
"value": 0
}
],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "$service Hystrix fallbacks",
"tooltip": {
"shared": true,
"sort": 2,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
},
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"alert": {
"alertRuleTags": {},
"conditions": [
{
"evaluator": {
"params": [],
"type": "no_value"
},
"operator": {
"type": "and"
},
"query": {
"params": [
"B",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [],
"type": "no_value"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"C",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [],
"type": "no_value"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"D",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [],
"type": "no_value"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"E",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [],
"type": "no_value"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"F",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [],
"type": "no_value"
},
"operator": {
"type": "and"
},
"query": {
"params": [
"G",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
}
],
"executionErrorState": "alerting",
"for": "5m",
"frequency": "1m",
"handler": 1,
"message": "Some service stopped reporting JVM metrics.",
"name": "JVM memory usage",
"noDataState": "alerting",
"notifications": []
},
"aliasColors": {},
"bars": false,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: below half the total memory available to pod.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 12,
"y": 22
},
"hiddenSeries": false,
"id": 5,
"interval": "",
"legend": {
"alignAsTable": false,
"avg": false,
"current": false,
"max": false,
"min": false,
"rightSide": false,
"show": false,
"total": false,
"values": false
},
"lines": true,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": false,
"steppedLine": false,
"targets": [
{
"expr": "sum(jvm_memory_used{memtype=\"HEAP\",spinSvc=\"$service\"}) by (instance)",
"intervalFactor": 2,
"legendFormat": "{{instance}}",
"refId": "A"
},
{
"expr": "sum(jvm_memory_used{memtype=\"HEAP\",spinSvc=\"gate\"}) by (instance)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "gate",
"refId": "B"
},
{
"expr": "sum(jvm_memory_used{memtype=\"HEAP\",spinSvc=\"orca\"}) by (instance)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "orca",
"refId": "C"
},
{
"expr": "sum(jvm_memory_used{memtype=\"HEAP\",spinSvc=\"echo\"}) by (instance)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "echo",
"refId": "D"
},
{
"expr": "sum(jvm_memory_used{memtype=\"HEAP\",spinSvc=\"front50\"}) by (instance)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "front50",
"refId": "E"
},
{
"expr": "sum(jvm_memory_used{memtype=\"HEAP\",spinSvc=\"clouddriver\"}) by (instance)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver",
"refId": "F"
},
{
"expr": "sum(jvm_memory_used{memtype=\"HEAP\",spinSvc=\"clouddriver_caching\"}) by (instance)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_caching",
"refId": "G"
}
],
"thresholds": [],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "$service JVM memory usage by instance",
"tooltip": {
"shared": true,
"sort": 2,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"format": "bytes",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
},
{
"format": "bytes",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
}
],
"title": "Common metrics",
"type": "row"
},
{
"collapsed": true,
"datasource": "prometheus",
"gridPos": {
"h": 1,
"w": 24,
"x": 0,
"y": 7
},
"id": 18,
"panels": [
{
"alert": {
"alertRuleTags": {},
"conditions": [
{
"evaluator": {
"params": [
100000000000
],
"type": "gt"
},
"operator": {
"type": "and"
},
"query": {
"params": [
"B",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "max"
},
"type": "query"
},
{
"evaluator": {
"params": [
100000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"C",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "max"
},
"type": "query"
}
],
"executionErrorState": "alerting",
"for": "5m",
"frequency": "1m",
"handler": 1,
"message": "Clouddriver caching is taking a long time.",
"name": "Clouddriver caching agents time",
"noDataState": "ok",
"notifications": []
},
"aliasColors": {},
"bars": true,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Below 1 minute.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 24,
"x": 0,
"y": 8
},
"hiddenSeries": false,
"id": 40,
"legend": {
"alignAsTable": true,
"avg": true,
"current": false,
"hideEmpty": true,
"hideZero": true,
"max": true,
"min": true,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": false,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": false,
"steppedLine": false,
"targets": [
{
"expr": "avg(label_replace(\n  delta(executionTime_seconds_count{spinSvc=\"$service\"}[1m])*1000000000\n, \"agentType\", \"$1\", \"agent\", \"^.*/(\\\\w+)\\\\[.*$\")) by (agent)\n",
"hide": false,
"intervalFactor": 2,
"legendFormat": "{{agent}}",
"refId": "A"
},
{
"expr": "avg(label_replace(\n  delta(executionTime_seconds_count{spinSvc=\"clouddriver\"}[1m])*1000000000\n, \"agentType\", \"$1\", \"agent\", \"^.*/(\\\\w+)\\\\[.*$\")) by (agent)\n",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver",
"refId": "B"
},
{
"expr": "avg(label_replace(\n  delta(executionTime_seconds_count{spinSvc=\"clouddriver_caching\"}[1m])*1000000000\n, \"agentType\", \"$1\", \"agent\", \"^.*/(\\\\w+)\\\\[.*$\")) by (agent)\n",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_caching",
"refId": "C"
}
],
"thresholds": [
{
"colorMode": "critical",
"fill": true,
"line": true,
"op": "gt",
"value": 100000000000
}
],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "$service Avg Agent Time",
"tooltip": {
"shared": false,
"sort": 1,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"format": "ns",
"label": null,
"logBase": 1,
"max": null,
"min": "0",
"show": true
},
{
"format": "ns",
"label": null,
"logBase": 1,
"max": null,
"min": "0",
"show": false
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"aliasColors": {},
"bars": false,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Any constant value.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 0,
"y": 13
},
"hiddenSeries": false,
"id": 27,
"legend": {
"alignAsTable": true,
"avg": false,
"current": true,
"hideEmpty": true,
"hideZero": true,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": true,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": false,
"steppedLine": false,
"targets": [
{
"expr": "count(label_replace(\n  delta(executionTime_seconds_count{spinSvc=\"$service\",agent=~\".*kubernetes.*\"}[1m])*1000000000\n, \"agentType\", \"$1\", \"agent\", \"^.*/(\\\\w+)\\\\[.*$\")\n) by (agentType)",
"intervalFactor": 2,
"legendFormat": "{{agentType}}",
"refId": "A"
}
],
"thresholds": [],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "$service Kubernetes Number of Agents",
"tooltip": {
"shared": true,
"sort": 2,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
},
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": false
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"alert": {
"alertRuleTags": {},
"conditions": [
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "and"
},
"query": {
"params": [
"B",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
},
{
"evaluator": {
"params": [
5000000000
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"C",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "avg"
},
"type": "query"
}
],
"executionErrorState": "alerting",
"for": "5m",
"frequency": "1m",
"handler": 1,
"message": "High kubectl latency in clouddriver",
"name": "Clouddriver kubectl latency",
"noDataState": "ok",
"notifications": []
},
"aliasColors": {},
"bars": false,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Below 5 seconds.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 12,
"y": 13
},
"hiddenSeries": false,
"id": 14,
"legend": {
"alignAsTable": true,
"avg": false,
"current": false,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": false
},
"lines": true,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": false,
"steppedLine": false,
"targets": [
{
"expr": "sum(rate(kubernetes_api_seconds_sum{success=\"true\",spinSvc=\"$service\"}[1m])*1000000000) by (account, action) / sum(rate(kubernetes_api_seconds_count{success=\"true\",spinSvc=\"$service\"}[1m])) by (account, action)",
"intervalFactor": 2,
"legendFormat": "{{account}}/{{action}}",
"refId": "A"
},
{
"expr": "sum(rate(kubernetes_api_seconds_sum{success=\"true\",spinSvc=\"clouddriver\"}[1m])*1000000000) by (account, action) / sum(rate(kubernetes_api_seconds_count{success=\"true\",spinSvc=\"clouddriver\"}[1m])) by (account, action)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver",
"refId": "B"
},
{
"expr": "sum(rate(kubernetes_api_seconds_sum{success=\"true\",spinSvc=\"clouddriver_caching\"}[1m])*1000000000) by (account, action) / sum(rate(kubernetes_api_seconds_count{success=\"true\",spinSvc=\"clouddriver_caching\"}[1m])) by (account, action)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_caching",
"refId": "C"
}
],
"thresholds": [
{
"colorMode": "critical",
"fill": true,
"line": true,
"op": "gt",
"value": 5000000000
}
],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "$service kubectl latency by account, action",
"tooltip": {
"shared": true,
"sort": 0,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"format": "ns",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
},
{
"format": "ns",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"aliasColors": {},
"bars": false,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Any constant value.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 0,
"y": 18
},
"hiddenSeries": false,
"id": 41,
"legend": {
"alignAsTable": true,
"avg": false,
"current": true,
"hideEmpty": true,
"hideZero": true,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": true,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": false,
"steppedLine": false,
"targets": [
{
"expr": "count(label_replace(\n  delta(executionTime_seconds_count{spinSvc=\"$service\",agent=~\".*aws.*\"}[1m])*1000000000\n, \"agentType\", \"$1\", \"agent\", \"^.*/(\\\\w+)\\\\[.*$\")\n) by (agent)",
"intervalFactor": 2,
"legendFormat": "{{agent}}",
"refId": "A"
}
],
"thresholds": [],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "$service AWS Number of Agents",
"tooltip": {
"shared": true,
"sort": 2,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
},
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": false
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"alert": {
"alertRuleTags": {},
"conditions": [
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "and"
},
"query": {
"params": [
"B",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
},
{
"evaluator": {
"params": [
0.25
],
"type": "gt"
},
"operator": {
"type": "or"
},
"query": {
"params": [
"C",
"5m",
"now"
]
},
"reducer": {
"params": [],
"type": "count"
},
"type": "query"
}
],
"executionErrorState": "alerting",
"for": "5m",
"frequency": "1m",
"handler": 1,
"message": "High error responses querying AWS infrastructure in clouddriver.",
"name": "Clouddriver AWS failed requests",
"noDataState": "ok",
"notifications": []
},
"aliasColors": {},
"bars": true,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Always 0.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 12,
"y": 18
},
"hiddenSeries": false,
"id": 38,
"interval": "",
"legend": {
"alignAsTable": true,
"avg": true,
"current": false,
"hideEmpty": true,
"hideZero": true,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": false,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": true,
"steppedLine": false,
"targets": [
{
"expr": "sum(rate(aws_request_requestCount_total{error=\"true\",spinSvc=\"$service\"}[1m])) by (AWSErrorCode, requestType)",
"intervalFactor": 2,
"legendFormat": "{{AWSErrorCode}}/{{requestType}}",
"refId": "A"
},
{
"expr": "sum(rate(aws_request_requestCount_total{error=\"true\",spinSvc=\"clouddriver\"}[1m])) by (AWSErrorCode, requestType)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver",
"refId": "B"
},
{
"expr": "sum(rate(aws_request_requestCount_total{error=\"true\",spinSvc=\"clouddriver_caching\"}[1m])) by (AWSErrorCode, requestType)",
"hide": true,
"intervalFactor": 2,
"legendFormat": "clouddriver_caching",
"refId": "C"
}
],
"thresholds": [
{
"colorMode": "critical",
"fill": true,
"line": true,
"op": "gt",
"value": 0.25,
"yaxis": "left"
}
],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "$service AWS failed requests by error / requestType",
"tooltip": {
"shared": false,
"sort": 2,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"decimals": null,
"format": "short",
"label": "avg/second",
"logBase": 1,
"max": null,
"min": "0",
"show": true
},
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": "0",
"show": true
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"aliasColors": {},
"bars": true,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Any value.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 0,
"y": 23
},
"hiddenSeries": false,
"id": 39,
"interval": "",
"legend": {
"alignAsTable": true,
"avg": true,
"current": false,
"hideEmpty": true,
"hideZero": true,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": false,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": true,
"steppedLine": false,
"targets": [
{
"expr": "sum(rate(aws_request_requestCount_total{error=\"false\",spinSvc=\"$service\"}[1m])) by (requestType)",
"intervalFactor": 2,
"legendFormat": "{{requestType}}",
"refId": "A"
}
],
"thresholds": [],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "$service AWS successful requests by requestType",
"tooltip": {
"shared": true,
"sort": 2,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"decimals": null,
"format": "short",
"label": "avg/second",
"logBase": 1,
"max": null,
"min": "0",
"show": true
},
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": "0",
"show": true
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"aliasColors": {},
"bars": false,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: 0 blocked, below 30 active.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 12,
"y": 23
},
"hiddenSeries": false,
"id": 37,
"legend": {
"alignAsTable": true,
"avg": true,
"current": false,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": true,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": false,
"steppedLine": false,
"targets": [
{
"expr": "sql_pool_tasks_total{spinSvc=\"$service\"}",
"intervalFactor": 2,
"legendFormat": "total/{{instance}}",
"refId": "A"
},
{
"expr": "sql_pool_tasks_active{spinSvc=\"$service\"}",
"legendFormat": "active/{{instance}}",
"refId": "B"
},
{
"expr": "sql_pool_tasks_blocked{spinSvc=\"$service\"}",
"legendFormat": "blocked/{{instance}}",
"refId": "C"
}
],
"thresholds": [],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "$service sql tasks connection pool",
"tooltip": {
"shared": true,
"sort": 0,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
},
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"aliasColors": {},
"bars": false,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: 0 blocked, below 30 active.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 0,
"y": 28
},
"hiddenSeries": false,
"id": 36,
"legend": {
"alignAsTable": true,
"avg": true,
"current": false,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": true,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": false,
"steppedLine": false,
"targets": [
{
"expr": "sql_pool_default_total{spinSvc=\"$service\"}",
"intervalFactor": 2,
"legendFormat": "total/{{instance}}",
"refId": "A"
},
{
"expr": "sql_pool_default_active{spinSvc=\"$service\"}",
"legendFormat": "active/{{instance}}",
"refId": "B"
},
{
"expr": "sql_pool_default_blocked{spinSvc=\"$service\"}",
"legendFormat": "blocked/{{instance}}",
"refId": "C"
}
],
"thresholds": [],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "$service sql default connection pool",
"tooltip": {
"shared": true,
"sort": 0,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
},
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
},
{
"aliasColors": {},
"bars": false,
"dashLength": 10,
"dashes": false,
"datasource": "prometheus",
"description": "Ideal value: Below 100 ms.",
"fill": 1,
"fillGradient": 0,
"gridPos": {
"h": 5,
"w": 12,
"x": 12,
"y": 28
},
"hiddenSeries": false,
"id": 30,
"legend": {
"alignAsTable": true,
"avg": true,
"current": false,
"max": false,
"min": false,
"rightSide": true,
"show": true,
"total": false,
"values": true
},
"lines": true,
"linewidth": 1,
"nullPointMode": "null",
"options": {
"dataLinks": []
},
"percentage": false,
"pointradius": 2,
"points": false,
"renderer": "flot",
"seriesOverrides": [],
"spaceLength": 10,
"stack": false,
"steppedLine": false,
"targets": [
{
"expr": "sum(rate(redis_command_latency_sscan_seconds_sum{spinSvc=\"$service\"}[1m])*1000000000) / sum(rate(redis_command_latency_sscan_seconds_count{spinSvc=\"$service\"}[1m]))",
"intervalFactor": 2,
"legendFormat": "sscan",
"refId": "A"
},
{
"expr": "sum(rate(redis_command_latency_mset_seconds_sum{spinSvc=\"$service\"}[1m])*1000000000) / sum(rate(redis_command_latency_mset_seconds_count{spinSvc=\"$service\"}[1m]))",
"legendFormat": "mset",
"refId": "B"
},
{
"expr": "sum(rate(redis_command_latency_mget_seconds_sum{spinSvc=\"$service\"}[1m])*1000000000) / sum(rate(redis_command_latency_mget_seconds_count{spinSvc=\"$service\"}[1m]))",
"legendFormat": "mget",
"refId": "C"
},
{
"expr": "sum(rate(redis_command_latency_hmget_seconds_sum{spinSvc=\"$service\"}[1m])*1000000000) / sum(rate(redis_command_latency_hmget_seconds_count{spinSvc=\"$service\"}[1m]))",
"legendFormat": "hmget",
"refId": "D"
},
{
"expr": "sum(rate(redis_command_latency_hmset_seconds_sum{spinSvc=\"$service\"}[1m])*1000000000) / sum(rate(redis_command_latency_hmset_seconds_count{spinSvc=\"$service\"}[1m]))",
"legendFormat": "hmset",
"refId": "E"
},
{
"expr": "sum(rate(redis_command_latency_del_seconds_sum{spinSvc=\"$service\"}[1m])*1000000000) / sum(rate(redis_command_latency_del_seconds_count{spinSvc=\"$service\"}[1m]))",
"legendFormat": "del",
"refId": "F"
},
{
"expr": "sum(rate(redis_command_latency_hdel_seconds_sum{spinSvc=\"$service\"}[1m])*1000000000) / sum(rate(redis_command_latency_hdel_seconds_count{spinSvc=\"$service\"}[1m]))",
"intervalFactor": 2,
"legendFormat": "hdel",
"refId": "G"
},
{
"expr": "sum(rate(redis_command_latency_set_seconds_sum{spinSvc=\"$service\"}[1m])*1000000000) / sum(rate(redis_command_latency_set_seconds_count{spinSvc=\"$service\"}[1m]))",
"intervalFactor": 2,
"legendFormat": "set",
"refId": "H"
}
],
"thresholds": [],
"timeFrom": null,
"timeRegions": [],
"timeShift": null,
"title": "$service redis latency",
"tooltip": {
"shared": true,
"sort": 2,
"value_type": "individual"
},
"type": "graph",
"xaxis": {
"buckets": null,
"mode": "time",
"name": null,
"show": true,
"values": []
},
"yaxes": [
{
"format": "ns",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": true
},
{
"format": "short",
"label": null,
"logBase": 1,
"max": null,
"min": null,
"show": false
}
],
"yaxis": {
"align": false,
"alignLevel": null
}
}
],
"title": "Clouddriver specific metrics",
"type": "row"
}
],
"refresh": "10s",
"schemaVersion": 21,
"style": "dark",
"tags": [],
"templating": {
"list": [
{
"allValue": null,
"current": {
"selected": true,
"tags": [],
"text": "gate",
"value": "gate"
},
"hide": 0,
"includeAll": false,
"label": "Selected Service",
"multi": false,
"name": "service",
"options": [
{
"selected": true,
"text": "gate",
"value": "gate"
},
{
"selected": false,
"text": "orca",
"value": "orca"
},
{
"selected": false,
"text": "clouddriver",
"value": "clouddriver"
},
{
"selected": false,
"text": "clouddriver_caching",
"value": "clouddriver_caching"
},
{
"selected": false,
"text": "clouddriver_ro",
"value": "clouddriver_ro"
},
{
"selected": false,
"text": "clouddriver_rw",
"value": "clouddriver_rw"
},
{
"selected": false,
"text": "clouddriver_ro_deck",
"value": "clouddriver_ro_deck"
},
{
"selected": false,
"text": "front50",
"value": "front50"
},
{
"selected": false,
"text": "echo",
"value": "echo"
},
{
"selected": false,
"text": "igor",
"value": "igor"
},
{
"selected": false,
"text": "rosco",
"value": "rosco"
},
{
"selected": false,
"text": "terraformer",
"value": "terraformer"
},
{
"selected": false,
"text": "dinghy",
"value": "dinghy"
}
],
"query": "gate,orca,clouddriver,clouddriver_caching,clouddriver_ro,clouddriver_rw,clouddriver_ro_deck,front50,echo,igor,rosco,terraformer,dinghy",
"skipUrlSync": false,
"type": "custom"
}
]
},
"time": {
"from": "now-3h",
"to": "now"
},
"timepicker": {
"refresh_intervals": [
"5s",
"10s",
"30s",
"1m",
"5m",
"15m",
"30m",
"1h",
"2h",
"1d"
]
},
"timezone": "",
"title": "Spinnaker - Main - ObservabilityPlugin",
"uid": "WAwfGpXZZ",
"version": 1
}
